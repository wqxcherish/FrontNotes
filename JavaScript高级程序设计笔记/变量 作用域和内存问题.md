## 1.ECMAScript的值类型
ECMAScript： 基本类型值(简单的数据段) 引用类型值(多个值构成的对象)
## 2.值类型及其特性
- Undefined Null Boolean Number String 基本类型值 按值访问 操作保存在变量中的实际的值
- 引用类型的值 保存在内存中的对象 是按引用访问 可以添加属性和方法，也可改变和删除

## 3.复制变量值
从一个变量复制基本类型的值，会在变量对象上创建一个新值，然后把值复制到为新变量分配的位置上

从一个变量向另一个变量复制引用类型的值时, 同样也会将存储在变量对象中的值复制一份放到为新变量分配的空间中。不同的是,这个值的副本实际上是一个指针，而这个指针指向存储在堆中的一个对象。复制操作结束后，两个变量实际上将引用同一个对象。改变其中一个变量,就会英雄另一个变量
## 4.传递参数
ECAMScript 中所有函数的参数都是按值传递的

在向参数传递基本类型的值时,被传递的值会被复制给一个局部变量(即命名参数，(arguments对象中的一个元素))。在向参数传递引用类型的值时，会把这个值在内存中的地址复制给一个局部变量，因此这个局部变量的变化 会反映在函数的外部

## 5.执行环境及作用域

执行环境定义了变量或函数 有权访问的其他数据，决定了它们各自的行为。每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中。

全局执行环境 时最外围的一个执行环境 window对象 global对象

每个函数都有自己的执行环境

当代码 在一个环境中执行时，会创建变量对象的一个作用域链。
作用域链 保证对执行环境有权访问的所有变量和函数的有序访问。作用域链的前端，始终都是当前执行的代码所在环境的变量对象

标识符解析是沿着作用域链 一级一级地搜索标识符的过程。搜索过程始终从作用域链的前端开始，然后逐级地向后回溯,直到找到标识符为止

```js
var color = 'blue';
function changeColoe() {
    if (color === 'blue') {
        color = 'red';
    }else {
        color = 'blue';
    }
}
changeColor();
alert('Color is now ' + color);
```

```js
var color = 'blue';
function changeColor() {
    var anotherColor = 'red';
    function swapColors() {
        var tempColor = anotherColor;
        anotherColor = color;
        color = tmpColor
        //这里可以访问color anotherColor 和 tempColor
    }
    swapColors(); /这里可以访问color anotherColor 不能访问 tempColor

}
//这里只能访问color
changeColor();

```

内部环境可以通过作用域链访问所有的外部环境，但外部环境不能访问内部环境中的任何变量和函数

## 6.延长作用域链

try-catch 语句的 catch 块
with 语句

这两个语句都会在作用域链的前端添加一个变量对象。对with语句来说，会将指定的对象添加到作用域链中。 对于catch语句来说，会创建一个新的变量对象，其中包含的是被抛出的错误对象的声明

## 7.没有块级作用域

在JavaScript中 for语句创建的变量i 即使在for循环执行结束后，也依旧会存在于外部的执行环境中
1.  声明变量

使用var声明的变量 会自动被添加到最接近的环境中。

2. 查询标识符

当在某个环境中 为了读取或写入 而引用一个标识符时，必须通过 搜索来确定该标识符实际代表什么。搜索过程从作用域链的前端开始，向上逐级查询 与给定名字匹配的标识符。如果在局部环境中找到了该标识符，搜索过程停止，变量就绪。如果在局部环境中 没有找到该变量名,则继续沿作用域链向上搜索。搜索过程 将一直追溯到全局环境的变量对象。如果在全局环境中也没有找到这个标识符，则意味这变量尚未声明。

## 8.垃圾收集
自动垃圾收集机制 执行环境会负责管理代码执行过程中使用的内存

局部变量的正常生命周期 只在函数执行的过程中存在，而在这个过程中 会为局部变量在栈(或堆)内存上分配相应的空间,以便存储他的值。然后在函数中 使用这些变量，直至函数执行结束。

垃圾标记策略

1. 标记清除
2. 引用计数

## 9.总结
1. JavaScript 变量 可以用来保存两种类型的值
2. 基本类型 引用类型 具有以下特点：
- 基本类型值 在内存中 占据固定大小的空间,保存在栈内存中
- 从一个变量 向另一个变量 复制基本类型的值,会创建这个值的一个副本
- 引用类型的值是对象 保存在堆内存
- 包含引用类型的变量实际上包含的并不是对象本身，而是一个指向该对象的指针
- 从一个变量向另一个变量复制引用的值，复制的其实是指针，因此两个变量最终都指向同个对象
- 确定一个值是哪种基本类型可以使用typeof 操作符 而确定一个值是哪种引用类型可以使用

3. instanceof 操作符

所有变量 都存在一个执行环境(作用域) 这个执行环境决定了变量的生命周期 以及哪一部分代码可以访问其中的变量

- 执行环境 有全局执行环境(全局环境)和函数执行环境之分
- 每次进入一个新执行环境,都会创建一个用于搜索变量和函数的作用域链
- 函数的局部环境不仅有权访问函数作用域中的变量,而且有权访问其包含(父)环境,乃至全局环境
- 全局环境只能访问 在全局环境中定义的变量和函数,而不能直接访问局部环境中的任何数据
- 变量的执行环境有助于确定何时释放内存

4. 自动垃圾收集机制
- 离开作用域的值将被自动标记为可以回收,因此将在垃圾收集期间被删除
- '标记清除' 是目前主流的垃圾收集算法,这种算法的思想是给当前不使用的值加上标记，然后再回收其内存
- 另一种垃圾收集算法 是'引用计数',这种算法的思想是跟踪记录所有值引用的次数

